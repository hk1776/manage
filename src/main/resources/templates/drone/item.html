<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <link th:href="@{/css/bootstrap.min.css}"
          href="../css/bootstrap.min.css" rel="stylesheet">
    <style>
        .container {
            max-width: 50%;
        }
        #schedule-info {
            position: fixed;
            float: right;
            right: 50px;
            top: 26.5%;
            width: 300px;
            padding: 0 10px 10px;
            border: 1px solid #ccc;
            background: #ffffff;
            text-align: left;
            border-radius: 10px;
        }
    </style>
</head>
<body>
<nav class="navbar navbar-expand-sm navbar-dark " style="border-bottom:2px solid #dcdbdb;">
    <div class="container-fluid">
        <a class="navbar-brand" href="/">
            <img src="/img/logo.png" alt="Logo" width="90" height="40" class="d-inline-block align-text-center">
        </a>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav me-auto mb-2 mb-lg-0">
            </ul>
            <a id="dronePage" href="/drone">
                <div style="float: right;margin-left: 8px;margin-right: 8px; color: black;font-weight: bold; margin-right: 60px;font-size: 20px">드론 관리</div>
            </a>
            <a id="inquiryPage" href="/items">
                <div style="float: right;margin-left: 8px;margin-right: 8px; color: black;font-weight: bold; margin-right: 60px;font-size: 20px">문의 관리</div>
            </a>
            <a id="asPage" href="/as">
                <div style="float: right;margin-left: 8px;margin-right: 8px; color: black;font-weight: bold; margin-right: 60px;font-size: 20px">As 관리</div>
            </a>
            <a id="deliveryPage" href="/delivery">
                <div style="float: right;margin-left: 8px;margin-right: 8px; color: black;font-weight: bold; margin-right: 60px;font-size: 20px">납품 관리</div>
            </a>
            <a id="flightPage" href="/flight">
                <div style="float: right;margin-left: 8px;margin-right: 8px; color: black;font-weight: bold; margin-right: 180px;font-size: 20px">비행 일정</div>
            </a>


            <a id="adminPage" href="/members/admin">
                <div style="float: right;margin-left: 8px;margin-right: 8px; color: black">관리자 페이지</div>
            </a>
            <div id="adminPage2" style="float: right;margin-right: 8px;color: black">|</div>
            <a href="/members/info">
                <div style="float: right;margin-left: 8px;margin-right: 8px; color: black">MyPage</div>
            </a>
            <div style="float: right;margin-right: 8px;color: black">|</div>
            <img src="/img/profile-user.png" alt="Logo" width="20" height="20" class="d-inline-block align-text-center">
            <div style="float: right;margin-left: 8px;margin-right: 15px; color: black" th:text="|${member.name}|">로그인 사용자 이름</div>
        </div>
    </div>
    </div>
</nav>
<div class="container">

    <div class="py-5 text-center">
        <h2>드론 정보</h2>
    </div>
    <div id ="resultDiv" class="container"style="max-width: 100%;height:auto;border: 1px solid #ccc; border-radius: 10px;margin-top: 10px;margin-bottom: 20px ">
        <table class="table"style="font-size: 13px">
            <thead>
            <tr>
                <th>항목</th>
                <th>내용 및 시리얼</th>
            </tr>
            </thead>
            <tbody>
            <tr>
                <td>기관명/업체명</td>
                <td id="companyRD" th:text="${item.company}"></td>
            </tr>
            <tr>
                <td>식 시리얼</td>
                <td id="serialRD" th:text="${item.serial}"></td>
            </tr>
            <tr>
                <td>기체 시리얼</td>
                <td id="droneRD" th:text="${item.drone}"></td>
            </tr>
            <tr>
                <td>바인딩 번호</td>
                <td id="bindingRD"th:text="${item.binding}"></td>
            </tr>
            <tr>
                <td>조종기</td>
                <td id="controllerRD"th:text="${item.controller}"></td>
            </tr>
            <tr>
                <td>배터리</td>
                <td id="batteryRD"th:text="${item.battery}"></td>
            </tr>
            <tr>
                <td>배터리 충전기</td>
                <td id="chargerRD"th:text="${item.charger}"></td>
            </tr>
            <tr>
                <td>짐벌</td>
                <td id="gimbalRD"th:text="${item.gimbal}"></td>
            </tr>
            <tr>
                <td>테블릿</td>
                <td id="tabletRD"th:text="${item.tablet}"></td>
            </tr>
            <tr>
                <td>RTK</td>
                <td id="rtkRD"th:text="${item.rtk}"></td>
            </tr>
            <tr>
                <td>Key 주입기</td>
                <td id="keyRD"th:text="${item.keyInput}"></td>
            </tr>
            <tr>
                <td>보드 번호</td>
                <td id="boardRD"th:text="${item.board}"></td>
            </tr>
            <tr>
                <td>펌웨어 버전</td>
                <td id="firmRD"th:text="${item.firmware}"></td>
            </tr>
            <tr>
                <td>메뉴얼 버전</td>
                <td id="manualRD"th:text="${item.manual}"></td>
            </tr>
            <tr>
                <td>비고</td>
                <td id="noteRD"th:text="${item.note}"></td>
            </tr>

            </tbody>
        </table>

    </div>
    <div id='schedule-info'>
        <div id="info-date" style="margin-top: 15px;border-radius: 5px;border: 1px solid #ccc;padding: 5px">
            문의 내역
            <button id="down1" style=" float:right;border: none;background-color: white" type="button" onclick="down1()">
                <img style="width: 15px;height: 15px" src="/img/down.png"/>
            </button>
            <button id="up1" style="display: none;background-color: white;  float:right;border: none;" type="button" onclick="up1()">
                <img style="width: 15px;height: 15px" src="/img/up.png"/>
            </button>
        </div>
        <div id="itemDiv" style="display: none; background-color: #f5f5f5;padding: 5px;border-left: 1px solid #ccc;padding: 5px;border-right: 1px solid #ccc;padding: 5px;border-bottom: 1px solid #ccc;padding: 5px">
            <table class="table">
                <thead>
                    <tr>
                        <th>No.</th>
                        <th>기관명/업체명</th>
                    </tr>
                </thead>
                <tbody>
                    <tr th:each="item : ${items}"  th:onclick="|location.href='@{/items/{itemId}(itemId=${item.id})}'|">
                        <td th:text="${item.id}">No.</td>
                        <td th:text="${item.company}">기관명/업체명</td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div id="info-type" style="margin-top: 15px;border-radius: 5px;border: 1px solid #ccc;padding: 5px">
            AS 내역
            <button id="down2" style=" float:right;border: none;background-color: white" type="button" onclick="down2()">
                <img style="width: 15px;height: 15px" src="/img/down.png"/>
            </button>
            <button id="up2" style="display: none; float:right;border: none;background-color: white" type="button" onclick="up2()">
                <img  style="width: 15px;height: 15px" src="/img/up.png"/>
            </button>
        </div>
        <div id="asDiv" style="display: none;background-color: #f5f5f5;padding: 5px;border-left: 1px solid #ccc;padding: 5px;border-right: 1px solid #ccc;padding: 5px;border-bottom: 1px solid #ccc;padding: 5px">
            <table class="table">
                <thead>
                <tr>
                    <th>No.</th>
                    <th>기관명/업체명</th>
                </tr>
                </thead>
                <tbody>
                    <tr th:each="as : ${as}"  th:onclick="|location.href='@{/as/{itemId}(itemId=${as.id})}'|">
                        <td th:text="${as.id}">No.</td>
                        <td th:text="${as.company}">기관명/업체명</td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div id="info-location" style="margin-top: 15px;border-radius: 5px;border: 1px solid #ccc;padding: 5px">
            납품 내역
            <button id="down3" style=" float:right;border: none;background-color: white" type="button" onclick="down3()">
                <img style="width: 15px;height: 15px" src="/img/down.png"/>
            </button>
            <button id="up3" style="display: none;  float:right;border: none;background-color: white" type="button" onclick="up3()">
                <img style="width: 15px;height: 15px" src="/img/up.png"/>
            </button>
        </div>
        <div id="deliDiv" style="display: none;background-color: #f5f5f5;padding: 5px;border-left: 1px solid #ccc;padding: 5px;border-right: 1px solid #ccc;padding: 5px;border-bottom: 1px solid #ccc;padding: 5px">
            <table class="table">
                <thead>
                <tr>
                    <th>No.</th>
                    <th>기관명/업체명</th>
                </tr>
                </thead>
                <tbody>
                    <tr th:each="delivery : ${delivery}"  th:onclick="|location.href='@{/delivery/{itemId}(itemId=${delivery.id})}'|">
                        <td th:text="${delivery.id}">No.</td>
                        <td th:text="${delivery.company}">기관명/업체명</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
    <hr class="my-4">

    <div class="row" style="margin-bottom: 100px">
        <div id="btn"  class="col">
            <button class="w-100 btn btn-primary btn-lg"
                    onclick="location.href='editForm.html'"
                    th:onclick="|location.href='@{/drone/{itemId}/edit?id=0(itemId=${item.serial})}'|"
                    type="button">부품 관리</button>
        </div>
        <div class="col">
            <button id="btn2" class="w-100 btn btn-secondary btn-lg"
                    onclick="location.href='items.html'"
                    th:onclick="|location.href='@{/drone}'|"
                    type="button">취소</button>
        </div>
    </div>

</div>
<script th:inline="javascript">
    var button = document.getElementById("btn");
    var button2 = document.getElementById("btn2");
    var admin = document.getElementById("adminPage");
    var admin2 = document.getElementById("adminPage2");

    var up1b = document.getElementById("up1");
    var up2b = document.getElementById("up2");
    var up3b= document.getElementById("up3");
    var down1b = document.getElementById("down1");
    var down2b = document.getElementById("down2");
    var down3b = document.getElementById("down3");

    var itemD = document.getElementById("itemDiv");
    var asD = document.getElementById("asDiv");
    var deliD = document.getElementById("deliDiv");
    /*<![CDATA[*/

    var rank = [[${member.rank}]];
    var id = [[${member.id}]];

    if(rank != "admin"){
        if(id != manager){
            button.style.display = "none";
            button2.style.width = "100%";
        }
        admin.style.display = "none";
        admin2.style.display = "none";
    }

    /*]]>*/

    function down1(){
        down1b.style.display = "none";
        up1b.style.display="block";
        itemD.style.display="block";
    }
    function down2(){
        down2b.style.display = "none";
        up2b.style.display="block";
        asD.style.display="block";
    }
    function down3(){
        down3b.style.display = "none";
        up3b.style.display="block";
        deliD.style.display="block";
    }
    function up1(){
        down1b.style.display = "block";
        up1b.style.display="none";
        itemD.style.display="none";
    }
    function up2(){
        down2b.style.display = "block";
        up2b.style.display="none";
        asD.style.display="none";
    }
    function up3(){
        down3b.style.display = "block";
        up3b.style.display="none";
        deliD.style.display="none";
    }



</script>
</body>
</html>
